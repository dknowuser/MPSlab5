LAB5-1                                                                                                        PAGE 1

                       1    $MOD52
                       2    
                       3    ;–î–∞–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã–≤–æ–¥ –º–∞—Å—Å–∏–≤–∞ —Å–∏–º–≤
                                                                               –æ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏,
                       4    ;—Ö—Ä–∞–Ω—è—â–µ–≥–æ—Å—è –≤ –í–ü–î, —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ 
                                                                               –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞
                       5    ;—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏–≥–Ω–∞–ª–æ–≤ –∫–≤–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–≥–æ—Ç–æ–≤–Ω–æ—Å
                                                                               —Ç—å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞,
                       6    ;–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–∏—ë–º–Ω–∏–∫–∞). –î–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ 
                                                                               –∫–≤–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                       7    ;–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–∏–Ω–∏–∏ P3.4 –∏ P3.5. 
                       8    ;–°–∫–æ—Ä–æ—Å—Ç—å –≤—ã–≤–æ–¥–∞ - 1200 –±–æ–¥.
                       9    
  0080                10    EXTERNAL_DATA_MEMORY EQU 80h
  00FF                11    EXTERNAL_DATA_MEMORY_SIZE EQU 0FFh
  0030                12    BYTE_NUMBER EQU 30h
                      13    
0000                  14    ORG 00h
0000                  15    init_serial_port:
                      16            ;–°—Ç–µ–∫ —Ä–∞—Å—Ç—ë—Ç –≤–≤–µ—Ä—Ö - —É–∫–∞–∑–∞—Ç–µ–ª—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–µ—
                                                                               Ä–≤—ã–π –±–∞–π—Ç –ø–æ—Å–ª–µ –ø—Ä–æ–≥—Ä–∞–
                                                                               º–º—ã
0000 758138           17            mov SP, #stack
                      18            
                      19            ;–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã —Ç–∞–π–º–µ—Ä–∞ T/C1
0003 758920           20            mov TMOD, #20h
                      21            
                      22            ;–ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
0006 758DE8           23            mov TH1, #0E8h
                      24            
0009 759840           25            mov SCON, #40h; –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∂–∏–º–µ 8-—Ä–∞–∑—Ä—è–¥–Ω–æ–≥–æ
                                                                                –£–ê–ü–ü
                      26            
000C 7880             27            mov R0, #EXTERNAL_DATA_MEMORY
000E 7900             28            mov R1, #00h; –°–∫–æ–ª—å–∫–æ –±–∞–π—Ç –ø–µ—Ä–µ–¥–∞–Ω–æ
                      29    
                      30            ;–ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ T/C1
0010 758840           31            mov TCON, #40h
                      32            
                      33            ;–ñ–¥—ë–º, –ø–æ–∫–∞ –ø—Ä–∏—ë–º–Ω–∏–∫ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–¥–∞—á–µ –¥–∞–
                                                                               Ω–Ω—ã—Ö
0013                  34    wait_for_receiver:
0013 E5B0             35            mov A, P3
0015 5420             36            anl A, #20h; –í—ã–¥–µ–ª—è–µ–º —Å–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏—ë–º–Ω–∏–∫–∞
0017 C3               37            clr C
0018 9420             38            subb A, #20h
001A 70F7             39            jnz wait_for_receiver
                      40            
                      41            ;–°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞
001C E5B0             42            mov A, P3
001E 54EF             43            anl A, #0EFh
0020 F5B0             44            mov P3, A
                      45            
                      46            
                      47            ;–ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç
0022 8699             48            mov SBUF, @R0
                      49            
                      50            ;–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ø–∏—Å–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ –±–∞–π—Ç–∞
LAB5-1                                                                                                        PAGE 2

0024 E9               51            mov A, R1
0025 C3               52            clr C
0026 94FF             53            subb A, #EXTERNAL_DATA_MEMORY_SIZE
0028 7004             54            jnz not_zero
002A 7900             55            mov R1, #00h; –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –Ω–∞—á–∞–ª–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º–æ–π –æ–±
                                                                               –ª–∞—Å—Ç–∏ –ø–∞–º—è—Ç–∏
002C 7880             56            mov R0, #EXTERNAL_DATA_MEMORY
                      57            
002E                  58    not_zero:
002E 09               59            inc R1
002F 08               60            inc R0
                      61            
                      62            ;–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞
                                                                               
0030 E5B0             63            mov A, P3
0032 4410             64            orl A, #10h
0034 F5B0             65            mov P3, A
                      66            
                      67    ;–ö–æ–Ω–µ—Ü –ø—Ä–æ–≥—Ä–∞–º–º—ã
0036 80DB             68            jmp wait_for_receiver
                      69            
0038                  70    stack:
                      71    
                      72    END

VERSION 1.2h ASSEMBLY COMPLETE, 0 ERRORS FOUND
LAB5-1                                                                                                        PAGE 3

BYTE_NUMBER. . . . . . . . . . .    NUMB  0030H  NOT USED  
EXTERNAL_DATA_MEMORY . . . . . .    NUMB  0080H  
EXTERNAL_DATA_MEMORY_SIZE. . . .    NUMB  00FFH  
INIT_SERIAL_PORT . . . . . . . .  C ADDR  0000H  NOT USED  
NOT_ZERO . . . . . . . . . . . .  C ADDR  002EH  
P3 . . . . . . . . . . . . . . .  D ADDR  00B0H  PREDEFINED  
SBUF . . . . . . . . . . . . . .  D ADDR  0099H  PREDEFINED  
SCON . . . . . . . . . . . . . .  D ADDR  0098H  PREDEFINED  
SP . . . . . . . . . . . . . . .  D ADDR  0081H  PREDEFINED  
STACK. . . . . . . . . . . . . .  C ADDR  0038H  
TCON . . . . . . . . . . . . . .  D ADDR  0088H  PREDEFINED  
TH1. . . . . . . . . . . . . . .  D ADDR  008DH  PREDEFINED  
TMOD . . . . . . . . . . . . . .  D ADDR  0089H  PREDEFINED  
WAIT_FOR_RECEIVER. . . . . . . .  C ADDR  0013H  
