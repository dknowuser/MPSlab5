LAB5-3                                                                                                        PAGE 1

                       1    $MOD52
                       2    
                       3    ;–î–∞–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–≤–æ–¥ –º–∞—Å—Å–∏–≤–∞ —Å–∏–º–≤–æ
                                                                               –ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                       4    ;–≤ –í–ü–î, —á–µ—Ä–µ–∑ –∫–∞–Ω–∞–ª –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞
                                                                               
                       5    ;—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏–≥–Ω–∞–ª–æ–≤ –∫–≤–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–≥–æ—Ç–æ–≤–Ω–æ—Å
                                                                               —Ç—å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞,
                       6    ;–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–∏—ë–º–Ω–∏–∫–∞). –î–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ 
                                                                               –∫–≤–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                       7    ;–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–∏–Ω–∏–∏ P3.4 –∏ P3.5. 
                       8    ;–°–∫–æ—Ä–æ—Å—Ç—å –≤—ã–≤–æ–¥–∞ - 2400 –±–æ–¥.
                       9    
  0080                10    EXTERNAL_DATA_MEMORY EQU 80h
  0070                11    EXTERNAL_DATA_MEMORY_SIZE EQU 70h
  0030                12    BYTE_NUMBER EQU 30h
  0031                13    ADDRESS EQU 31h
                      14    
0000                  15    ORG 00h
0000 020057           16            jmp init_serial_port
                      17            
0023                  18    ORG 23h
                      19            ;–°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–≥–∏—Å—Ç—Ä—ã –Ω–∞ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –æ–±—Ä–∞–±–æ—Ç—á–∏
                                                                               –∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
0023 FA               20            mov R2, A
0024 ABD0             21            mov R3, PSW
                      22    
                      23            ;–°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏—ë–º–Ω–∏–∫–∞
0026 E5B0             24            mov A, P3
0028 54DF             25            anl A, #0DFh
002A F5B0             26            mov P3, A
                      27            
                      28            ;–°—á–∏—Ç—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—Ä—
                                                                               Ç–∞
002C E6               29            mov A, @R0
002D F8               30            mov R0, A
002E A699             31            mov @R0, SBUF
                      32            
                      33            ;–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —á—Ç–µ–Ω–∏—é —Å–ª–µ–¥—É—é—â–µ–≥–æ –±–∞–π—Ç–∞
0030 E7               34            mov A, @R1
0031 C3               35            clr C
0032 9470             36            subb A, #EXTERNAL_DATA_MEMORY_SIZE
0034 7009             37            jnz not_zero
0036 7700             38            mov @R1, #00h; –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –Ω–∞—á–∞–ª–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º–æ–π –æ–
                                                                               ±–ª–∞—Å—Ç–∏ –ø–∞–º—è—Ç–∏
0038 7831             39            mov R0, #ADDRESS
003A 7680             40            mov @R0, #EXTERNAL_DATA_MEMORY
003C 020043           41            jmp continue
                      42            
003F                  43    not_zero:
003F 07               44            inc @R1
0040 7831             45            mov R0, #ADDRESS
0042 06               46            inc @R0
                      47    
0043                  48    continue:
                      49            
                      50            ;–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏—ë–º–Ω–∏–∫–∞
0043 E5B0             51            mov A, P3
LAB5-3                                                                                                        PAGE 2

0045 4420             52            orl A, #20h
0047 F5B0             53            mov P3, A
                      54            
                      55            ;–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–µ–≥–∏—Å—Ç—Ä—ã
0049 EA               56            mov A, R2
004A 8BD0             57            mov PSW, R3
004C 7A00             58            mov R2, #00h
004E 7B00             59            mov R3, #00h
0050 7831             60            mov R0, #ADDRESS
0052 7930             61            mov R1, #BYTE_NUMBER; –°–∫–æ–ª—å–∫–æ –±–∞–π—Ç –ø–æ–ª—É—á–µ–Ω–æ
                      62            
                      63            ;–°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–π—Ç–∞ –ø
                                                                               –æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç
                                                                               –∞
0054 C298             64            clr SCON.0
0056 32               65            reti
                      66    
0057                  67    init_serial_port:
                      68            ;–°—Ç–µ–∫ —Ä–∞—Å—Ç—ë—Ç –≤–≤–µ—Ä—Ö - —É–∫–∞–∑–∞—Ç–µ–ª—å —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–µ—
                                                                               Ä–≤—ã–π –±–∞–π—Ç –ø–æ—Å–ª–µ –ø—Ä–æ–≥—Ä–∞–
                                                                               º–º—ã
0057 758176           69            mov SP, #stack
                      70            
                      71            ;–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã —Ç–∞–π–º–µ—Ä–∞ T/C1
005A 758920           72            mov TMOD, #20h
                      73            
                      74            ;–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è 
005D 75A890           75            mov IE, #90h
                      76            
                      77            ;–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
0060 75B810           78            mov IP, #10h
                      79            
                      80            ;–ù–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
0063 758DF4           81            mov TH1, #0F4h
                      82            
0066 7831             83            mov R0, #ADDRESS
0068 7930             84            mov R1, #BYTE_NUMBER; –°–∫–æ–ª—å–∫–æ –±–∞–π—Ç –ø–æ–ª—É—á–µ–Ω–æ
                      85            
006A 7700             86            mov @R1, #00h
006C 7680             87            mov @R0, #EXTERNAL_DATA_MEMORY
                      88    
                      89            ;–ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ T/C1
006E 758840           90            mov TCON, #40h
                      91    
0071 759850           92            mov SCON, #50h; –ü—Ä–∏—ë–º –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∂–∏–º–µ 8-—Ä–∞–∑—Ä—è–¥–Ω–æ–≥–æ –£–ê–
                                                                               ü–ü
                      93            
                      94    ;–ö–æ–Ω–µ—Ü –ø—Ä–æ–≥—Ä–∞–º–º—ã
0074                  95    lp:
0074 80FE             96            jmp lp
                      97            
0076                  98    stack:
                      99    
                     100    END

VERSION 1.2h ASSEMBLY COMPLETE, 0 ERRORS FOUND
LAB5-3                                                                                                        PAGE 3

ADDRESS. . . . . . . . . . . . .    NUMB  0031H  
BYTE_NUMBER. . . . . . . . . . .    NUMB  0030H  
CONTINUE . . . . . . . . . . . .  C ADDR  0043H  
EXTERNAL_DATA_MEMORY . . . . . .    NUMB  0080H  
EXTERNAL_DATA_MEMORY_SIZE. . . .    NUMB  0070H  
IE . . . . . . . . . . . . . . .  D ADDR  00A8H  PREDEFINED  
INIT_SERIAL_PORT . . . . . . . .  C ADDR  0057H  
IP . . . . . . . . . . . . . . .  D ADDR  00B8H  PREDEFINED  
LP . . . . . . . . . . . . . . .  C ADDR  0074H  
NOT_ZERO . . . . . . . . . . . .  C ADDR  003FH  
P3 . . . . . . . . . . . . . . .  D ADDR  00B0H  PREDEFINED  
PSW. . . . . . . . . . . . . . .  D ADDR  00D0H  PREDEFINED  
SBUF . . . . . . . . . . . . . .  D ADDR  0099H  PREDEFINED  
SCON . . . . . . . . . . . . . .  D ADDR  0098H  PREDEFINED  
SP . . . . . . . . . . . . . . .  D ADDR  0081H  PREDEFINED  
STACK. . . . . . . . . . . . . .  C ADDR  0076H  
TCON . . . . . . . . . . . . . .  D ADDR  0088H  PREDEFINED  
TH1. . . . . . . . . . . . . . .  D ADDR  008DH  PREDEFINED  
TMOD . . . . . . . . . . . . . .  D ADDR  0089H  PREDEFINED  
